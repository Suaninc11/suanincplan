<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="carrierPlanForm">

    
    <select id="selectCarrierPlanListCount" parameterType="com.suaninc.newsagency.domain.CarrierPlan" resultType="int">
	    SELECT COUNT(*)
	    FROM carrier_plan cp
	    <where>
	        <if test="templateCode != null and templateCode != ''">
	            template_code = #{templateCode}
	        </if>
	    </where>
	</select>

    <select id="selectCarrierPlanList" parameterType="java.util.Map" resultType="com.suaninc.newsagency.domain.CarrierPlan">
		SELECT
			carrier_plan_id AS carrierPlanId,
			template_code AS templateCode,
			carrier_plan_name AS carrierPlanName,
			mobile_carrier AS mobileCarrier,
			monthly_billing_amt AS monthlyBillingAmt,
			basic_amt AS basicAmt,
			discount_amt AS discountAmt,
			voice_call AS voiceCall,
			mobile_data AS mobileData,
			mobile_qos AS mobileQos,
			mobile_message AS mobileMessage,
			registered_datetime AS registeredDatetime
		FROM
			carrier_plan cp
	    <where>
	        <if test="form.templateCode != null and form.templateCode != ''">
	            template_code = #{form.templateCode}
	        </if>
	    </where>
		ORDER BY carrier_plan_id DESC
	    LIMIT #{pageSize} OFFSET #{offset}
    </select>
    
    <select id="selectCarrierPlanInfo" resultType="com.suaninc.newsagency.domain.CarrierPlan">
		SELECT
			carrier_plan_id AS carrierPlanId,
			template_code AS templateCode,
			carrier_plan_name AS carrierPlanName,
			mobile_carrier AS mobileCarrier,
			monthly_billing_amt AS monthlyBillingAmt,
			basic_amt AS basicAmt,
			discount_amt AS discountAmt,
			voice_call AS voiceCall,
			mobile_data AS mobileData,
			mobile_qos AS mobileQos,
			mobile_message AS mobileMessage,
			registered_datetime AS registeredDatetime
		FROM
			carrier_plan cp
		WHERE	
            carrier_plan_id = #{carrierPlanId}
		ORDER BY carrier_plan_id
    </select>
    
	<update id="updateCarrierPlan" parameterType="com.suaninc.newsagency.domain.CarrierPlan">
	    UPDATE carrier_plan
	    SET 
	        mobile_carrier = #{mobileCarrier},
	        monthly_billing_amt = #{monthlyBillingAmt},
	        basic_amt = #{basicAmt},
	        discount_amt = #{discountAmt},
	        voice_call = #{voiceCall},
	        mobile_data = #{mobileData},
	        mobile_qos = #{mobileQos},
	        mobile_message = #{mobileMessage}
	    WHERE carrier_plan_id = #{carrierPlanId}
	</update>

	<delete id="deleteCarrierPlan" parameterType="com.suaninc.newsagency.domain.CarrierPlan">
	    DELETE FROM carrier_plan
	    WHERE carrier_plan_id = #{carrierPlanId}
	</delete>

	<insert id="addCarrierPlan" parameterType="com.suaninc.newsagency.domain.CarrierPlan">
	    INSERT INTO carrier_plan 
		    (template_code,
		    carrier_plan_name,
		    mobile_carrier,
		    monthly_billing_amt,
		    basic_amt,
		    discount_amt,
		    voice_call,
		    mobile_data,
		    mobile_qos,
		    mobile_message,
		    registered_datetime)
	    VALUES
			    (#{templateCode},
			    #{carrierPlanName},
			    #{mobileCarrier},
			    #{monthlyBillingAmt},
			    #{basicAmt},
			    #{discountAmt},
			    #{voiceCall},
			    #{mobileData},
			    #{mobileQos},
			    #{mobileMessage},
			    now())
	</insert>



</mapper>
