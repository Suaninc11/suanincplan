<!DOCTYPE html>
<html lang="en" class="light-style layout-menu-fixed" dir="ltr" data-theme="theme-default" data-assets-path="/assets/" data-template="vertical-menu-template-free" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<title>suaninc</title>
	<link href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i" rel="stylesheet">
	<link rel="icon" href="/img/favicon.ico" type="image/x-icon">
	<link rel="shortcut icon" href="/img/favicon.ico" type="image/x-icon">

	<script src="/js/pages-script.js"></script>
	<link rel="stylesheet" href="/css/common.css" />
	<!-- Icons. Uncomment required icon fonts -->
	<link rel="stylesheet" href="/assets/vendor/fonts/boxicons.css" />
	<!-- Core CSS -->
	<link rel="stylesheet" href="/assets/vendor/css/core.css" class="template-customizer-core-css" />
	<link rel="stylesheet" href="/assets/vendor/css/theme-default.css" class="template-customizer-theme-css" />
	<link rel="stylesheet" href="/assets/css/demo.css" />
	<!-- Vendors CSS -->
	<link rel="stylesheet" href="/assets/vendor/libs/perfect-scrollbar/perfect-scrollbar.css" />
	<link rel="stylesheet" href="/assets/vendor/libs/apex-charts/apex-charts.css" />
	<!-- Helpers -->
	<script src="/assets/vendor/js/helpers.js"></script>
	<script src="/assets/js/config.js"></script>
	<!-- AdressAPI -->
	<script src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
</head>

<body>
    <!-- Layout wrapper -->
    <div class="layout-wrapper layout-content-navbar">
        <div class="layout-container">
            
            <!-- Menu -->
            <div th:replace="~{/fragments/sidebar :: sidebar}"></div>
            <!-- / Menu -->

            <!-- Layout container -->
            <div class="layout-page">
                
                <!-- Content wrapper -->
                <div class="content-wrapper">
                    
					<!-- Header -->
					<div class="row">
					    <div class="col-12">
					        <nav class="layout-navbar navbar navbar-expand-xl navbar-detached align-items-center bg-navbar-theme" id="layout-navbar">
					            <div class="navbar-nav align-items-center">
					                <i class="bx bx-cog me-2 text-primary fs-4"></i>
					                <span class="fw-semibold">요금제 설정</span>
					            </div>
					            <div class="ms-auto">
					                <ol class="breadcrumb breadcrumb-style1 mb-0">
					                    <li class="breadcrumb-item">
					                        <a href="javascript:void(0);">설정</a>
					                    </li>
					                    <li class="breadcrumb-item">
					                        <a href="/homepage/carrierPlan/carrierPlanList">요금제 설정</a>
					                    </li>
					                    <li class="breadcrumb-item active">요금제 목록</li>
					                </ol>
					            </div>
					        </nav>
					    </div>
					</div>
					
                    <!-- Content -->
                    <div class="container-fluid flex-grow-1 container-p-y">
						
                        <!-- Carrier Plan List Card -->
                        <div class="card">
							<div class="card-header d-flex justify-content-between align-items-center">
							    <h5 class="card-title mb-0 d-flex align-items-center">
							        <i class="bx bx-wallet me-2"></i>요금제 목록
							    </h5>
							</div>

                            <!-- Search Form -->
                            <div class="card-body border-bottom">
								<form id="searchForm" action="/homepage/carrierPlan/carrierPlanList" method="get" class="row g-3 align-items-end justify-content-between">
                                    <div class="col-md-2">
                                        <label class="form-label">통신사 선택</label>
                                        <select class="form-select" name="templateCode" th:value="${carrierPlan.templateCode}">
                                            <option value="">전체 통신사</option>
											<option value="joytel" th:selected="${carrierPlan.templateCode == 'joytel'}">조이텔</option>
											<option value="ktmMobile" th:selected="${carrierPlan.templateCode == 'ktmMobile'}">KTM모바일</option>
											<option value="skyLife" th:selected="${carrierPlan.templateCode == 'skyLife'}">스카이라이프</option>
											<option value="uplusuMobile" th:selected="${carrierPlan.templateCode == 'uplusuMobile'}">유모바일</option>
                                            <option value="helloMobile" th:selected="${carrierPlan.templateCode == 'helloMobile'}">헬로모바일</option>
                                        </select>
                                    </div>
                                    <div class="col-md-3 d-flex align-items-center gap-2">
                                        <button type="submit" class="btn btn-primary">
                                            <i class="bx bx-search-alt me-1"></i>검색
                                        </button>
                                        <a href="/homepage/carrierPlan/carrierPlanList" class="btn btn-outline-secondary ms-2">
                                            <i class="bx bx-refresh me-1"></i>전체
                                        </a>
                                    </div>
									<div class="col-md-auto ms-auto">
									    <a href="/homepage/carrierPlan/carrierPlanForm" class="btn btn-primary">
									        <i class="bx bx-plus me-1"></i>요금제 추가
									    </a>
									</div>
                                </form>
                            </div>

                            <!-- Table -->
                            <div class="table-responsive text-nowrap">
                                <table class="table table-hover">
                                    <thead class="table-light">
                                        <tr>
                                            <th class="text-center" style="width: 120px;">통신사</th>
                                            <th>요금제명</th>
                                            <th class="text-center" style="width: 120px;">월청구요금</th>
                                            <th class="text-center" style="width: 100px;">기본료</th>
                                            <th class="text-center" style="width: 100px;">할인</th>
                                            <th class="text-center" style="width: 120px;">문자</th>
                                            <th class="text-center" style="width: 140px;">수정일자</th>
                                            <th class="text-center" style="width: 80px;">상태</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <th:block th:each="carrierPlan : ${carrierPlanList}">
                                            <tr>
                                                <td class="text-center">
                                                    <span class="badge bg-label-primary fw-medium" th:text="${carrierPlan.carrierPlanName}"></span>
                                                </td>
                                                <td>
                                                    <div class="d-flex align-items-center">
                                                        <i class="bx bx-wallet text-primary me-2"></i>
                                                        <a th:href="@{/homepage/carrierPlan/carrierPlanInfo(id=${carrierPlan.carrierPlanId})}" 
                                                           class="fw-medium text-primary text-decoration-none hover-underline"
                                                           th:text="${carrierPlan.mobileCarrier}">
                                                        </a>
                                                    </div>
                                                </td>
												<td class="text-center">
													<span class="text-muted" th:text="${#numbers.formatInteger(carrierPlan.monthlyBillingAmt, 0, 'COMMA')} + '원'"></span>
												</td>
												<td class="text-center">
													<span class="text-muted" th:text="${#numbers.formatInteger(carrierPlan.basicAmt, 0, 'COMMA')} + '원'"></span>
												</td>

												<td class="text-center">
													<span class="text-muted"th:text="${#numbers.formatInteger(carrierPlan.discountAmt, 0, 'COMMA')} + '원'"></span>
												</td>
                                                <td class="text-center">
                                                    <span class="text-muted" th:text="${carrierPlan.voiceCall ?: '-'}"></span>
                                                </td>
                                                <td class="text-center">
                                                    <span class="text-muted" th:text="${carrierPlan.lastUpdatedDatetime}"></span>
                                                </td>
                                                <td class="text-center">
                                                    <span th:if="${carrierPlan.activeYn == 'Y'}" class="badge bg-success">사용</span>
                                                    <span th:if="${carrierPlan.activeYn == 'N'}" class="badge bg-secondary">미사용</span>
                                                </td>
                                            </tr>
                                        </th:block>
                                        <tr th:if="${#lists.isEmpty(carrierPlanList)}">
                                            <td class="text-center text-muted" colspan="8">
                                                <div class="py-4">
                                                    <i class="bx bx-mobile-alt fs-2 mb-2 d-block text-muted"></i>
                                                    등록된 요금제가 없습니다.
                                                </div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>

							<!-- Pagination -->
							<div class="card-footer">
							    <div class="row align-items-center">
							        <div class="col-md-6">
							            <div class="text-muted">
							                <small>
							                    총 <span class="fw-medium" th:text="${carrierPlanList.totalElements}"></span>개 항목 중 
							                    <span class="fw-medium" th:text="${carrierPlanList.number * carrierPlanList.size + 1}"></span>-<span class="fw-medium" th:text="${(carrierPlanList.number + 1) * carrierPlanList.size > carrierPlanList.totalElements ? carrierPlanList.totalElements : (carrierPlanList.number + 1) * carrierPlanList.size}"></span>개 표시
							                </small>
							            </div>
							        </div>
							        
							        <div class="col-md-6 d-flex justify-content-center justify-content-md-end">
							            <nav aria-label="Page navigation">
							                <ul class="pagination pagination-sm mb-0">
							                    <li class="page-item" th:classappend="${carrierPlanList.number == 0} ? 'disabled'">
							                        <a th:href="@{/homepage/carrierPlan/carrierPlanList(page=${0}, templateCode=${carrierPlan.templateCode})}" class="page-link">
							                            <i class="bx bx-chevrons-left" style="font-size: 0.6rem;"></i>
							                        </a>
							                    </li>
							                    
							                    <li class="page-item" th:classappend="${carrierPlanList.number == 0} ? 'disabled'">
							                        <a th:href="@{/homepage/carrierPlan/carrierPlanList(page=${carrierPlanList.number - 1}, templateCode=${carrierPlan.templateCode})}" class="page-link">
							                            <i class="bx bx-chevron-left" style="font-size: 0.6rem;"></i>
							                        </a>
							                    </li>

							                    <li th:each="i : ${#numbers.sequence(
							                            carrierPlanList.number < 3 ? 0 : (carrierPlanList.number >= carrierPlanList.totalPages - 3 ? carrierPlanList.totalPages - 5 : carrierPlanList.number - 2),
							                            carrierPlanList.number < 3 ? (carrierPlanList.totalPages >= 5 ? 4 : carrierPlanList.totalPages - 1) : (carrierPlanList.number >= carrierPlanList.totalPages - 3 ? carrierPlanList.totalPages - 1 : carrierPlanList.number + 2))}"
							                        class="page-item" th:classappend="${carrierPlanList.number == i} ? 'active'">
							                        <a th:href="@{/homepage/carrierPlan/carrierPlanList(page=${i}, templateCode=${carrierPlan.templateCode})}" 
							                           class="page-link" th:text="${i + 1}"></a>
							                    </li>

							                    <li class="page-item" th:classappend="${carrierPlanList.number == carrierPlanList.totalPages - 1} ? 'disabled'">
							                        <a th:if="${carrierPlanList.number < carrierPlanList.totalPages - 1}" 
							                           th:href="@{/homepage/carrierPlan/carrierPlanList(page=${carrierPlanList.number + 1}, templateCode=${carrierPlan.templateCode})}" 
							                           class="page-link">
							                            <i class="bx bx-chevron-right" style="font-size: 0.6rem;"></i>
							                        </a>
							                        <span th:if="${carrierPlanList.number == carrierPlanList.totalPages - 1}" class="page-link">
							                            <i class="bx bx-chevron-right" style="font-size: 0.6rem;"></i>
							                        </span>
							                    </li>

							                    <li class="page-item" th:classappend="${carrierPlanList.number == carrierPlanList.totalPages - 1} ? 'disabled'">
							                        <a th:if="${carrierPlanList.number < carrierPlanList.totalPages - 1}" 
							                           th:href="@{/homepage/carrierPlan/carrierPlanList(page=${carrierPlanList.totalPages - 1}, templateCode=${carrierPlan.templateCode})}" 
							                           class="page-link">
							                            <i class="bx bx-chevrons-right" style="font-size: 0.6rem;"></i>
							                        </a>
							                        <span th:if="${carrierPlanList.number == carrierPlanList.totalPages - 1}" class="page-link">
							                            <i class="bx bx-chevrons-right" style="font-size: 0.6rem;"></i>
							                        </span>
							                    </li>
							                </ul>
							            </nav>
							        </div>
							    </div>
							</div>
							
                        </div>
                    </div>
                    <!-- / Content -->

                    <!-- Footer -->
                    <div th:replace="~{/fragments/footer :: footer}"></div>
                    <!-- / Footer -->

                    <div class="content-backdrop fade"></div>
                </div>
                <!-- Content wrapper -->
            </div>
            <!-- / Layout page -->
        </div>

        <!-- Overlay -->
        <div class="layout-overlay layout-menu-toggle"></div>
    </div>
    <!-- / Layout wrapper -->

	<!-- Core JS -->
	<script src="/assets/vendor/js/menu.js"></script>
	<script src="/assets/vendor/libs/jquery/jquery.js"></script>
	<script src="/assets/vendor/libs/popper/popper.js"></script>
	<script src="/assets/vendor/js/bootstrap.js"></script>
	<script src="/assets/vendor/libs/perfect-scrollbar/perfect-scrollbar.js"></script>
	<script src="/assets/vendor/js/menu.js"></script>
	<script src="/assets/vendor/libs/apex-charts/apexcharts.js"></script>
	<script src="/assets/js/main.js"></script>
	<script src="/assets/js/dashboards-analytics.js"></script>
	<script async defer src="https://buttons.github.io/buttons.js"></script>

    <!-- Page JS -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // 호버 효과를 위한 CSS 추가
            const style = document.createElement('style');
            style.textContent = `
                .hover-underline:hover {
                    text-decoration: underline !important;
                }
                
                .table tbody tr:hover {
                    background-color: rgba(67, 89, 113, 0.04);
                }
            `;
            document.head.appendChild(style);

            // 검색 폼 자동 제출 (통신사 선택 변경 시)
            const templateCodeSelect = document.querySelector('select[name="templateCode"]');
            if (templateCodeSelect) {
                templateCodeSelect.addEventListener('change', function() {
                    // 자동 제출하지 않고 사용자가 검색 버튼을 클릭하도록 함
                });
            }
        });
    </script>
	
	<div th:replace="~{fragments/password-check-modal :: passwordCheckModal}"></div>
	
</body>
</html>